<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kawaii Emoji Memory Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --bg-color: #fff5f7; /* è–„ã„ãƒ”ãƒ³ã‚¯èƒŒæ™¯ */
            --card-back: #ff9fb2; /* ã‹ã‚ã„ã„ãƒ”ãƒ³ã‚¯ */
            --card-front: #ffffff;
        }

        body {
            background-color: var(--bg-color);
            font-family: 'Hiragino Kaku Gothic Pro', 'Meiryo', sans-serif;
            touch-action: manipulation;
        }

        .perspective-1000 {
            perspective: 1000px;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
            cursor: pointer;
        }

        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 1rem;
            box-shadow: 0 4px 10px rgba(255, 182, 193, 0.4);
        }

        .card-back {
            background: linear-gradient(135deg, #ffc0cb 0%, #ff9fb2 100%);
            color: white;
            z-index: 2;
        }

        .card-back::after {
            content: 'âœ¨';
            font-size: 2rem;
        }

        .card-front {
            background-color: var(--card-front);
            transform: rotateY(180deg);
            font-size: 2.8rem;
            z-index: 1;
            border: 3px solid #ffe4e8;
        }

        .card.matched .card-inner {
            animation: bounce 0.6s ease-in-out;
        }

        @keyframes bounce {
            0%, 100% { transform: rotateY(180deg) scale(1); }
            50% { transform: rotateY(180deg) scale(1.15); }
        }

        #game-board {
            display: grid;
            gap: 12px;
            max-width: 800px;
            margin: 0 auto;
        }

        .kawaii-shadow {
            box-shadow: 0 10px 25px -5px rgba(255, 159, 178, 0.3);
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-6">
            <h1 class="text-4xl font-black text-pink-500 mb-2 drop-shadow-sm">ğŸ’– çµµæ–‡å­—ã‚ã‚ã› ğŸ’–</h1>
            <p class="text-pink-400 font-bold text-sm">ãƒšã‚¢ã‚’è¦‹ã¤ã‘ã¦ãƒãƒƒãƒ”ãƒ¼ï¼</p>
        </header>

        <!-- Controls -->
        <div class="flex flex-wrap justify-center gap-4 mb-8 bg-white/80 backdrop-blur-sm p-5 rounded-3xl kawaii-shadow border border-pink-100">
            <div class="flex items-center gap-2">
                <label class="text-sm font-bold text-pink-600">ã‚€ãšã‹ã—ã•:</label>
                <select id="difficulty" class="bg-pink-50 border border-pink-200 text-pink-700 text-sm rounded-xl focus:ring-pink-400 focus:border-pink-400 p-2 font-bold outline-none">
                    <option value="easy">ã‚„ã•ã—ã„ (12æš)</option>
                    <option value="medium" selected>ãµã¤ã† (20æš)</option>
                    <option value="hard">ã‚€ãšã‹ã—ã„ (30æš)</option>
                </select>
            </div>
            <button id="reset-btn" class="bg-pink-500 hover:bg-pink-600 active:scale-95 text-white font-black py-2 px-8 rounded-full transition-all shadow-lg shadow-pink-200">
                ã‚¹ã‚¿ãƒ¼ãƒˆï¼
            </button>
            <div class="flex items-center gap-6 ml-4">
                <div class="text-center">
                    <p class="text-[10px] text-pink-400 font-bold uppercase tracking-widest">Moves</p>
                    <p id="moves" class="text-2xl font-black text-pink-600">0</p>
                </div>
                <div class="text-center">
                    <p class="text-[10px] text-pink-400 font-bold uppercase tracking-widest">Time</p>
                    <p id="timer" class="text-2xl font-black text-pink-600">00:00</p>
                </div>
            </div>
        </div>

        <!-- Game Board -->
        <div id="game-board">
            <!-- Cards will be injected here -->
        </div>

        <!-- Result Modal -->
        <div id="modal" class="fixed inset-0 bg-pink-100/60 backdrop-blur-md hidden flex items-center justify-center z-50 p-4">
            <div class="bg-white p-10 rounded-[3rem] max-w-sm w-full text-center shadow-2xl border-4 border-pink-200 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-2 bg-pink-300"></div>
                <div class="text-7xl mb-6 scale-110">ğŸ­</div>
                <h2 class="text-3xl font-black text-pink-500 mb-4">ã™ã”ãƒ¼ã„ï¼ã‚¯ãƒªã‚¢ï¼</h2>
                <div class="space-y-3 mb-8 bg-pink-50 p-4 rounded-2xl">
                    <p class="text-pink-600 font-bold">ã‹ã‹ã£ãŸæ™‚é–“: <span id="final-time" class="text-2xl"></span></p>
                    <p class="text-pink-600 font-bold">å‹•ã‹ã—ãŸæ•°: <span id="final-moves" class="text-2xl"></span></p>
                </div>
                <button id="close-modal" class="w-full bg-pink-500 hover:bg-pink-600 text-white font-black py-4 rounded-2xl transition-all shadow-lg hover:shadow-pink-300 active:scale-95">
                    ã‚‚ã†ä¸€å›ã‚ãã¶ï¼
                </button>
            </div>
        </div>
    </div>

    <script>
        // ã‚ˆã‚Šã€Œã‹ã‚ã„ã„ã€ã‚’æ„è­˜ã—ãŸçµµæ–‡å­—ã‚»ãƒƒãƒˆ
        const kawaiiEmojis = [
            'ğŸ¦„', 'ğŸ¦', 'ğŸ©', 'ğŸ€', 'ğŸ§¸', 'ğŸ’–', 'ğŸ­', 'ğŸ“', 
            'ğŸ±', 'ğŸŒˆ', 'ğŸ¨', 'ğŸŒ¸', 'âœ¨', 'ğŸ¥', 'ğŸ›¸', 'ğŸˆ', 
            'ğŸ’', 'ğŸ®', 'ğŸ§', 'ğŸ¼', 'ğŸ°', 'ğŸ’', 'ğŸª', 'ğŸ¥¤',
            'ğŸ¦‹', 'ğŸŒ»', 'ğŸ¥', 'ğŸ¾', 'ğŸ€', 'ğŸ’Œ'
        ];
        
        const difficultyConfig = {
            easy: { pairs: 6, cols: 'grid-cols-3 sm:grid-cols-4' },
            medium: { pairs: 10, cols: 'grid-cols-4 sm:grid-cols-5' },
            hard: { pairs: 15, cols: 'grid-cols-5 sm:grid-cols-6' }
        };

        let cards = [];
        let flippedCards = [];
        let matchedCount = 0;
        let moves = 0;
        let timer = null;
        let seconds = 0;
        let isLocked = false;

        const board = document.getElementById('game-board');
        const movesEl = document.getElementById('moves');
        const timerEl = document.getElementById('timer');
        const diffSelect = document.getElementById('difficulty');
        const resetBtn = document.getElementById('reset-btn');
        const modal = document.getElementById('modal');

        function startTimer() {
            stopTimer();
            seconds = 0;
            timer = setInterval(() => {
                seconds++;
                const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
                const secs = (seconds % 60).toString().padStart(2, '0');
                timerEl.textContent = `${mins}:${secs}`;
            }, 1000);
        }

        function stopTimer() {
            if (timer) clearInterval(timer);
        }

        function shuffle(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function initGame() {
            const config = difficultyConfig[diffSelect.value];
            const selectedEmojis = shuffle([...kawaiiEmojis]).slice(0, config.pairs);
            const gameIcons = shuffle([...selectedEmojis, ...selectedEmojis]);
            
            board.innerHTML = '';
            board.className = `grid gap-4 ${config.cols}`;
            flippedCards = [];
            matchedCount = 0;
            moves = 0;
            isLocked = false;
            movesEl.textContent = '0';
            timerEl.textContent = '00:00';
            stopTimer();
            startTimer();

            gameIcons.forEach((icon) => {
                const card = document.createElement('div');
                card.className = 'card h-28 sm:h-36 perspective-1000';
                card.dataset.icon = icon;
                card.innerHTML = `
                    <div class="card-inner w-full h-full">
                        <div class="card-back"></div>
                        <div class="card-front">${icon}</div>
                    </div>
                `;
                card.addEventListener('click', () => flipCard(card));
                board.appendChild(card);
            });
        }

        function flipCard(card) {
            if (isLocked || card.classList.contains('flipped') || card.classList.contains('matched')) return;

            card.classList.add('flipped');
            flippedCards.push(card);

            if (flippedCards.length === 2) {
                moves++;
                movesEl.textContent = moves;
                checkMatch();
            }
        }

        function checkMatch() {
            isLocked = true;
            const [card1, card2] = flippedCards;
            const isMatch = card1.dataset.icon === card2.dataset.icon;

            if (isMatch) {
                matchedCount++;
                card1.classList.add('matched');
                card2.classList.add('matched');
                
                setTimeout(() => {
                    flippedCards = [];
                    isLocked = false;
                    checkWin();
                }, 600);
            } else {
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                    flippedCards = [];
                    isLocked = false;
                }, 1000);
            }
        }

        function checkWin() {
            const config = difficultyConfig[diffSelect.value];
            if (matchedCount === config.pairs) {
                stopTimer();
                document.getElementById('final-time').textContent = timerEl.textContent;
                document.getElementById('final-moves').textContent = moves;
                
                // å°‘ã—é…ã‚‰ã›ã¦ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’å‡ºã™ï¼ˆæœ€å¾Œã®ã‚«ãƒ¼ãƒ‰ãŒè¦‹ãˆã‚‹ã‚ˆã†ã«ï¼‰
                setTimeout(() => {
                    modal.classList.remove('hidden');
                }, 500);
            }
        }

        resetBtn.addEventListener('click', initGame);
        document.getElementById('close-modal').addEventListener('click', () => {
            modal.classList.add('hidden');
            initGame();
        });

        window.onload = initGame;
    </script>
</body>
</html>