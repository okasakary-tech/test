<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›‘å­¦ã‚¯ã‚¤ã‚ºãƒ»ãƒã‚¹ã‚¿ãƒ¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: 20px;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 600px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .option-btn {
            transition: all 0.2s ease;
            border: 2px solid #e2e8f0;
        }

        .option-btn:hover:not(:disabled) {
            background-color: #f7fafc;
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .correct {
            background-color: #48bb78 !important;
            color: white !important;
            border-color: #48bb78 !important;
        }

        .wrong {
            background-color: #f56565 !important;
            color: white !important;
            border-color: #f56565 !important;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .progress-bar {
            height: 8px;
            background-color: #edf2f7;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.4s ease;
        }

        .mode-card {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .mode-card:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>

    <div class="glass-card p-6 md:p-10" id="game-container">
        <!-- Mode Selection Screen -->
        <div id="mode-screen" class="text-center">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">ğŸ§  é›‘å­¦ã‚¯ã‚¤ã‚ºãƒ»ãƒã‚¹ã‚¿ãƒ¼</h1>
            <p class="text-gray-600 mb-8">æŒ‘æˆ¦ã—ãŸã„ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’é¸ã‚“ã§ãã ã•ã„ï¼<br><span class="text-xs">å„ãƒ¢ãƒ¼ãƒ‰å…¨5å•</span></p>
            
            <div class="grid grid-cols-1 gap-4">
                <button onclick="startQuiz('school')" class="mode-card bg-orange-100 p-6 rounded-2xl border-2 border-orange-200 text-left flex items-center">
                    <span class="text-4xl mr-4">ğŸ«</span>
                    <div>
                        <div class="font-bold text-orange-800 text-lg">å­¦æ ¡ç”Ÿæ´»ãƒ¢ãƒ¼ãƒ‰</div>
                        <p class="text-sm text-orange-600 font-medium">å­¦æ ¡ã‚„æ–‡æˆ¿å…·ã«ã¾ã¤ã‚ã‚‹é©šãã®äº‹å®Ÿ</p>
                    </div>
                </button>
                
                <button onclick="startQuiz('animal')" class="mode-card bg-green-100 p-6 rounded-2xl border-2 border-green-200 text-left flex items-center">
                    <span class="text-4xl mr-4">ğŸ¦</span>
                    <div>
                        <div class="font-bold text-green-800 text-lg">å‹•ç‰©ãƒ»ç”Ÿä½“ãƒ¢ãƒ¼ãƒ‰</div>
                        <p class="text-sm text-green-600 font-medium">ç”Ÿãç‰©ã®ä¸æ€è­°ãªç”Ÿæ…‹ã‚’å­¦ã¼ã†</p>
                    </div>
                </button>
                
                <button onclick="startQuiz('food')" class="mode-card bg-yellow-100 p-6 rounded-2xl border-2 border-yellow-200 text-left flex items-center">
                    <span class="text-4xl mr-4">ğŸ•</span>
                    <div>
                        <div class="font-bold text-yellow-800 text-lg">é£Ÿã¹ç‰©ãƒ¢ãƒ¼ãƒ‰</div>
                        <p class="text-sm text-yellow-600 font-medium">ç¾å‘³ã—ã„é£Ÿã¹ç‰©ã®æ„å¤–ãªç§˜å¯†</p>
                    </div>
                </button>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden">
            <div class="flex justify-between items-center mb-4">
                <span class="text-sm font-semibold text-gray-500 uppercase tracking-wider" id="question-counter">Question 1 / 5</span>
                <span class="text-sm font-semibold text-indigo-600" id="current-score">Score: 0</span>
            </div>
            
            <div class="progress-bar mb-8">
                <div id="progress-fill" class="progress-fill"></div>
            </div>

            <div id="question-text" class="text-xl font-bold text-gray-800 mb-8 min-h-[4rem]"></div>

            <div class="grid grid-cols-1 gap-4" id="options-container"></div>

            <div id="feedback" class="mt-6 text-center font-bold text-lg hidden p-4 rounded-xl"></div>

            <div class="mt-8 flex justify-end">
                <button id="next-btn" class="hidden bg-gray-800 hover:bg-black text-white font-bold py-2 px-6 rounded-lg transition">
                    æ¬¡ã¸é€²ã‚€ â†’
                </button>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="hidden text-center">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">çµæœç™ºè¡¨</h2>
            <div class="text-6xl font-bold text-indigo-600 mb-6" id="final-score">0 / 5</div>
            <p id="result-message" class="text-gray-600 mb-8 text-lg"></p>
            <button onclick="location.reload()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full text-lg shadow-lg transition duration-300">
                ãƒ¢ãƒ¼ãƒ‰é¸æŠã«æˆ»ã‚‹
            </button>
        </div>
    </div>

    <script>
        const allQuizData = {
            school: [
                {
                    q: "æ¶ˆã—ã‚´ãƒ ã§æ–‡å­—ãŒæ¶ˆãˆã‚‹ç†ç”±ã¯ã€æ‘©æ“¦ã§å‰Šã£ã¦ã„ã‚‹ã‹ã‚‰ã§ã¯ãªãã€ä½•ã‚’ã—ã¦ã„ã‚‹ã‹ã‚‰ï¼Ÿ",
                    a: ["ã‚¤ãƒ³ã‚¯ã‚’å¸ã„å–ã£ã¦ã„ã‚‹", "é‰›ç­†ã®ç²‰ã‚’å¸ç€ã—ã¦ã„ã‚‹", "ç´™ã®è¡¨é¢ã‚’æº¶ã‹ã—ã¦ã„ã‚‹", "é™é›»æ°—ã§é£›ã°ã—ã¦ã„ã‚‹"],
                    correct: 1,
                    desc: "é‰›ç­†ã®èŠ¯ã§ã‚ã‚‹é»’é‰›ã®ç²‰ã‚’ã€æ¶ˆã—ã‚´ãƒ ã®ã‚´ãƒ æˆåˆ†ãŒçµ¡ã‚å–ã£ã¦åŒ…ã¿è¾¼ã‚€ã“ã¨ã§æ–‡å­—ãŒæ¶ˆãˆã¾ã™ã€‚"
                },
                {
                    q: "å­¦æ ¡ã®ãƒãƒ£ã‚¤ãƒ ã€Œã‚­ãƒ³ã‚³ãƒ³ã‚«ãƒ³ã‚³ãƒ³ã€ã®ãƒ¡ãƒ­ãƒ‡ã‚£ã€‚å…ƒã€…ã¯ä½•ã®å»ºç‰©ã®æ™‚è¨ˆã®éŸ³ï¼Ÿ",
                    a: ["å›½ä¼šè­°äº‹å ‚", "ã‚¦ã‚§ã‚¹ãƒˆãƒŸãƒ³ã‚¹ã‚¿ãƒ¼å¯ºé™¢", "æ±äº¬ã‚¿ãƒ¯ãƒ¼", "ãƒ”ã‚µã®æ–œå¡”"],
                    correct: 1,
                    desc: "ã‚¤ã‚®ãƒªã‚¹ã®ã‚¦ã‚§ã‚¹ãƒˆãƒŸãƒ³ã‚¹ã‚¿ãƒ¼å¯ºé™¢ã«ã‚ã‚‹æ™‚è¨ˆå¡”ï¼ˆãƒ“ãƒƒã‚°ãƒ»ãƒ™ãƒ³ï¼‰ã®é˜ã®éŸ³ãŒãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚"
                },
                {
                    q: "ä¸–ç•Œä¸€é•·ã„ã¨è¨€ã‚ã‚Œã‚‹ã€ã‚ã‚‹å›½ã®å¤ä¼‘ã¿ã€‚ã©ã®ãã‚‰ã„ã‚ã‚‹ï¼Ÿ",
                    a: ["1ãƒ¶æœˆ", "2ãƒ¶æœˆ", "3ãƒ¶æœˆ", "4ãƒ¶æœˆ"],
                    correct: 2,
                    desc: "ã‚¤ã‚¿ãƒªã‚¢ã‚„ã‚¢ãƒ¡ãƒªã‚«ãªã©ã€æ¬§ç±³ã®å¤šãã®å›½ã§ã¯ç´„3ãƒ¶æœˆé–“ã®é•·ã„å¤ä¼‘ã¿ãŒã‚ã‚Šã¾ã™ã€‚"
                },
                {
                    q: "å­¦æ ¡ã®é»’æ¿ã€‚å…ƒã€…ã®è‰²ã¯ã€Œé»’ã€ã ã£ãŸãŒã€ãªãœä»Šã®ã€Œç·‘è‰²ã€ãŒä¸»æµã«ãªã£ãŸï¼Ÿ",
                    a: ["ç›®ãŒç–²ã‚Œã«ãã„ã‹ã‚‰", "å¡—æ–™ãŒå®‰ã‹ã£ãŸã‹ã‚‰", "æ¤ç‰©ã‚’é€£æƒ³ã•ã›ã‚‹ã‹ã‚‰", "é»’ã ã¨ãƒãƒ§ãƒ¼ã‚¯ãŒè¦‹ãˆã«ãã„ã‹ã‚‰"],
                    correct: 0,
                    desc: "1950å¹´ä»£é ƒã‹ã‚‰ã€å…‰ã®åå°„ãŒå°‘ãªãã¦ç›®ãŒç–²ã‚Œã«ãã„ç·‘è‰²ã®å¡—è£…é»’æ¿ãŒæ™®åŠã—ã¾ã—ãŸã€‚åå‰ã ã‘ã€Œé»’æ¿ã€ã¨ã—ã¦æ®‹ã£ã¦ã„ã¾ã™ã€‚"
                },
                {
                    q: "ãƒ©ãƒ³ãƒ‰ã‚»ãƒ«ã®ç™ºç¥¥ã¨è¨€ã‚ã‚Œã‚‹å›½ã¯ã©ã“ï¼Ÿ",
                    a: ["æ—¥æœ¬", "ãƒ‰ã‚¤ãƒ„", "ã‚ªãƒ©ãƒ³ãƒ€", "ã‚¤ã‚®ãƒªã‚¹"],
                    correct: 2,
                    desc: "æ±Ÿæˆ¸æ™‚ä»£æœ«æœŸã€ã‚ªãƒ©ãƒ³ãƒ€ã‹ã‚‰ä¼ã‚ã£ãŸæ­©å…µç”¨ã®èƒŒåš¢ï¼ˆã¯ã„ã®ã†ï¼‰ã€Œãƒ©ãƒ³ã‚»ãƒ«ã€ãŒèªæºã§ã™ã€‚"
                }
            ],
            animal: [
                {
                    q: "ãƒ©ãƒƒã‚³ãŒæµ·ã§å¯ã‚‹ã¨ãã€æµã•ã‚Œãªã„ã‚ˆã†ã«ä½•ã‚’ã™ã‚‹ï¼Ÿ",
                    a: ["å²©ã‚’æŠ±ã", "æ˜†å¸ƒã‚’ä½“ã«å·»ã", "ä»²é–“ã¨æ‰‹ã‚’ç¹‹ã", "ç ‚ã«æ½œã‚‹"],
                    correct: 1,
                    desc: "æµ·è—»ï¼ˆã‚±ãƒ«ãƒ—ãªã©ï¼‰ã‚’ä½“ã«å·»ãä»˜ã‘ã¦ã€æµã•ã‚Œãªã„ã‚ˆã†ã«ã‚¢ãƒ³ã‚«ãƒ¼ä»£ã‚ã‚Šã«ã—ã¾ã™ã€‚"
                },
                {
                    q: "ã‚¿ã‚³ã®å¿ƒè‡“ã¯ã„ãã¤ã‚ã‚‹ï¼Ÿ",
                    a: ["1ã¤", "2ã¤", "3ã¤", "4ã¤"],
                    correct: 2,
                    desc: "ã‚¿ã‚³ã«ã¯å¿ƒè‡“ãŒ3ã¤ã‚ã‚Šã¾ã™ã€‚1ã¤ã¯å…¨èº«ã«è¡€ã‚’é€ã‚‹ç”¨ã€ã‚ã¨ã®2ã¤ã¯ã‚¨ãƒ©ã«è¡€ã‚’é€ã‚‹ç”¨ã§ã™ã€‚"
                },
                {
                    q: "ã‚¦ã‚µã‚®ãŒè‡ªåˆ†ã®ã€Œãµã‚“ã€ã‚’é£Ÿã¹ã‚‹ç†ç”±ã¯ï¼Ÿ",
                    a: ["ãŠè…¹ãŒç©ºã„ãŸã‹ã‚‰", "æ „é¤Šã‚’ã‚‚ã†ä¸€åº¦å¸åã™ã‚‹ãŸã‚", "æ•µã«ãƒãƒ¬ãªã„ã‚ˆã†ã«éš ã™ãŸã‚", "æ­¯ã‚’ç£¨ããŸã‚"],
                    correct: 1,
                    desc: "ä¸€åº¦ã§ã¯å¸åã—ãã‚Œãªã‹ã£ãŸãƒ“ã‚¿ãƒŸãƒ³ãªã©ã®æ „é¤Šã‚’æ‘‚å–ã™ã‚‹ãŸã‚ã«ã€é£Ÿç³ã¨ã„ã†ç¿’æ€§ãŒã‚ã‚Šã¾ã™ã€‚"
                },
                {
                    q: "ãƒšãƒ³ã‚®ãƒ³ãŒç©ºã‚’é£›ã¹ãªã„ä»£ã‚ã‚Šã«ã€æµ·ä¸­ã§æ³³ãé€Ÿåº¦ã¯æ™‚é€Ÿä½•ã‚­ãƒ­ãã‚‰ã„ï¼Ÿ",
                    a: ["æ™‚é€Ÿç´„10km", "æ™‚é€Ÿç´„35km", "æ™‚é€Ÿç´„60km", "æ™‚é€Ÿç´„100km"],
                    correct: 1,
                    desc: "ç¨®é¡ã«ã‚‚ã‚ˆã‚Šã¾ã™ãŒã€ã‚¸ã‚§ãƒ³ãƒ„ãƒ¼ãƒšãƒ³ã‚®ãƒ³ãªã©ã¯æ™‚é€Ÿ35kmä»¥ä¸Šã§æ³³ãã“ã¨ãŒã§ãã€ã“ã‚Œã¯ã‚ªãƒªãƒ³ãƒ”ãƒƒã‚¯é¸æ‰‹ã®ç´„4å€ã®é€Ÿã•ã§ã™ã€‚"
                },
                {
                    q: "ãƒ‘ãƒ³ãƒ€ã®èµ¤ã¡ã‚ƒã‚“ã€‚ç”Ÿã¾ã‚ŒãŸç›´å¾Œã®ä½“é‡ã¯è¦ªã®ä½•åˆ†ã®ä¸€ãã‚‰ã„ï¼Ÿ",
                    a: ["ç´„10åˆ†ã®1", "ç´„50åˆ†ã®1", "ç´„200åˆ†ã®1", "ç´„1000åˆ†ã®1"],
                    correct: 3,
                    desc: "ãƒ‘ãƒ³ãƒ€ã®èµ¤ã¡ã‚ƒã‚“ã¯ç´„150gå‰å¾Œã§ç”Ÿã¾ã‚Œã¾ã™ã€‚è¦ªï¼ˆç´„100kgä»¥ä¸Šï¼‰ã®ç´„900ã€œ1000åˆ†ã®1ã¨ã„ã†ã€å“ºä¹³é¡ã®ä¸­ã§ã‚‚æ¥µã‚ã¦å°ã•ãç”Ÿã¾ã‚Œã‚‹å‹•ç‰©ã§ã™ã€‚"
                }
            ],
            food: [
                {
                    q: "ãƒˆã‚¦ãƒ¢ãƒ­ã‚³ã‚·ã®ã€Œç²’ã€ã®æ•°ã¨ã€ã‚ã‚‹éƒ¨åˆ†ã®æ•°ã¯å¿…ãšåŒã˜ã€‚ãã‚Œã¯ã©ã“ï¼Ÿ",
                    a: ["æ ¹ã£ã“ã®æ•°", "è‘‰ã£ã±ã®æ•°", "ãƒ’ã‚²ã®æ•°", "èŠ¯ã®é•·ã•ï¼ˆmmï¼‰"],
                    correct: 2,
                    desc: "ãƒ’ã‚²ã®ä¸€æœ¬ä¸€æœ¬ãŒç²’ã®å…ƒã«ãªã‚‹ã€Œçµ¹ç³¸ã€ãªã®ã§ã€ç²’ã®æ•°ã¨ãƒ’ã‚²ã®æ•°ã¯ä¸€è‡´ã—ã¾ã™ã€‚"
                },
                {
                    q: "ã‚·ãƒ§ãƒ¼ãƒˆã‚±ãƒ¼ã‚­ã®ã€Œã‚·ãƒ§ãƒ¼ãƒˆã€ã®æœ¬å½“ã®æ„å‘³ã¯ï¼Ÿ",
                    a: ["çŸ­ã„", "è¶³ã‚Šãªã„", "ã‚µã‚¯ã‚µã‚¯ã—ãŸ", "å°ã•ã„"],
                    correct: 2,
                    desc: "è‹±èªã®ã€shortã€ã«ã¯ã€Œã‚µã‚¯ã‚µã‚¯ã—ãŸã€ã¨ã„ã†æ„å‘³ãŒã‚ã‚Šã€å…ƒã€…ã¯ã‚µã‚¯ã‚µã‚¯ã—ãŸç”Ÿåœ°ã®ãŠè“å­ã‚’æŒ‡ã—ã¦ã„ã¾ã—ãŸã€‚"
                },
                {
                    q: "ã‚¤ãƒã‚´ã®è¡¨é¢ã«ã‚ã‚‹ãƒ„ãƒ–ãƒ„ãƒ–ã€‚å®Ÿã¯ã‚ã‚Œã€ã‚¤ãƒã‚´ã®ä½•ï¼Ÿ",
                    a: ["ç¨®", "æœå®Ÿ", "æ¯›", "ã‚´ãƒŸ"],
                    correct: 1,
                    desc: "ã‚ã®ãƒ„ãƒ–ãƒ„ãƒ–ä¸€ã¤ä¸€ã¤ãŒå®Ÿã¯ã€Œæœå®Ÿã€ã§ã€ä¸­ã«ã‚ã‚‹ã®ãŒç¨®ã§ã™ã€‚"
                },
                {
                    q: "ä¸–ç•Œã§ä¸€ç•ªé£Ÿã¹ã‚‰ã‚Œã¦ã„ã‚‹æœç‰©ã¯ä½•ï¼Ÿ",
                    a: ["ãƒªãƒ³ã‚´", "ãƒãƒŠãƒŠ", "ãƒˆãƒãƒˆ", "ãƒŸã‚«ãƒ³"],
                    correct: 2,
                    desc: "æ¤ç‰©å­¦çš„ã«ã¯ã€Œæœå®Ÿã€ã«åˆ†é¡ã•ã‚Œã‚‹ãƒˆãƒãƒˆãŒã€ä¸–ç•Œã§æœ€ã‚‚ç”Ÿç”£é‡ãƒ»æ¶ˆè²»é‡ãŒå¤šã„ã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚"
                },
                {
                    q: "ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã®åŸæ–™ã€Œã‚«ã‚«ã‚ªã€ã€‚å¤§æ˜”ï¼ˆå¤ä»£ãƒãƒ¤æ–‡æ˜ãªã©ï¼‰ã¯ä½•ã¨ã—ã¦ä½¿ã‚ã‚Œã¦ã„ãŸï¼Ÿ",
                    a: ["è–¬", "å»ºæ", "é€šè²¨ï¼ˆãŠé‡‘ï¼‰", "æ´‹æœã®æŸ“æ–™"],
                    correct: 2,
                    desc: "ã‚«ã‚«ã‚ªè±†ã¯éå¸¸ã«è²´é‡ã ã£ãŸãŸã‚ã€é€šè²¨ã¨ã—ã¦æµé€šã—ã¦ã„ã¾ã—ãŸã€‚ã‚¦ã‚µã‚®1ç¾½ãŒã‚«ã‚«ã‚ªè±†10ç²’ã§è²·ãˆãŸã¨ã„ã†è¨˜éŒ²ã‚‚ã‚ã‚Šã¾ã™ã€‚"
                }
            ]
        };

        let currentQuestion = 0;
        let score = 0;
        let shuffledQuiz = [];

        const modeScreen = document.getElementById('mode-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const feedback = document.getElementById('feedback');
        const nextBtn = document.getElementById('next-btn');
        const progressFill = document.getElementById('progress-fill');
        const counter = document.getElementById('question-counter');
        const scoreDisplay = document.getElementById('current-score');

        function startQuiz(mode) {
            // Pick all 5 questions and shuffle them
            shuffledQuiz = [...allQuizData[mode]].sort(() => Math.random() - 0.5);
            currentQuestion = 0;
            score = 0;
            modeScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const q = shuffledQuiz[currentQuestion];
            questionText.innerText = q.q;
            questionText.className = "text-xl font-bold text-gray-800 mb-8 min-h-[4rem] fade-in";
            optionsContainer.innerHTML = '';
            feedback.classList.add('hidden');
            nextBtn.classList.add('hidden');

            counter.innerText = `Question ${currentQuestion + 1} / ${shuffledQuiz.length}`;
            progressFill.style.width = `${((currentQuestion) / shuffledQuiz.length) * 100}%`;

            const labels = ['A', 'B', 'C', 'D'];
            q.a.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn w-full text-left p-4 rounded-xl font-medium text-gray-700 flex items-center bg-white';
                btn.innerHTML = `<span class="bg-gray-200 text-gray-600 w-8 h-8 rounded-full flex items-center justify-center mr-4 flex-shrink-0 font-bold">${labels[index]}</span> ${option}`;
                btn.onclick = () => checkAnswer(index, btn);
                optionsContainer.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, btn) {
            const q = shuffledQuiz[currentQuestion];
            const buttons = optionsContainer.querySelectorAll('button');
            
            buttons.forEach(b => b.disabled = true);

            if (selectedIndex === q.correct) {
                btn.classList.add('correct');
                score++;
                scoreDisplay.innerText = `Score: ${score}`;
                feedback.innerText = "âœ¨ æ­£è§£ï¼";
                feedback.className = "mt-6 text-center font-bold text-lg text-green-700 bg-green-50 p-4 rounded-xl border border-green-200 fade-in";
            } else {
                btn.classList.add('wrong');
                buttons[q.correct].classList.add('correct');
                feedback.innerText = "âŒ æ®‹å¿µï¼";
                feedback.className = "mt-6 text-center font-bold text-lg text-red-700 bg-red-50 p-4 rounded-xl border border-red-200 fade-in";
            }

            const desc = document.createElement('p');
            desc.className = "text-sm text-gray-600 mt-3 font-normal leading-relaxed";
            desc.innerText = q.desc;
            feedback.appendChild(desc);
            feedback.classList.remove('hidden');
            nextBtn.classList.remove('hidden');
        }

        nextBtn.onclick = () => {
            currentQuestion++;
            if (currentQuestion < shuffledQuiz.length) {
                showQuestion();
            } else {
                showResult();
            }
        };

        function showResult() {
            quizScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            document.getElementById('final-score').innerText = `${score} / ${shuffledQuiz.length}`;
            
            let message = "";
            if (score === shuffledQuiz.length) message = "å®Œç’§ã§ã™ï¼åšå£«ãƒ¬ãƒ™ãƒ«ã§ã™ã­ï¼";
            else if (score >= 4) message = "ã™ã”ã„ï¼ã‹ãªã‚Šã®ç‰©çŸ¥ã‚Šã§ã™ã€‚";
            else if (score >= 2) message = "é¢ç™½ã„é›‘å­¦ãŒã„ã£ã±ã„ã‚ã‚Šã¾ã—ãŸã­ï¼";
            else message = "æ¬¡ã¯å…¨å•æ­£è§£ã‚’ç›®æŒ‡ã—ã¦é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼";
            
            document.getElementById('result-message').innerText = message;
        }
    </script>
</body>
</html>