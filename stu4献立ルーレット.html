<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çŒ®ç«‹ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ - ä»Šæ—¥ã®ã”ã¯ã‚“æ±ºå®šï¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&display=swap');

        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background-color: #fffaf0;
        }

        .roulette-container {
            position: relative;
            width: 260px;
            height: 260px;
            margin: 0 auto;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid #f87171;
            position: relative;
            transition: transform 3s cubic-bezier(0.1, 0, 0.1, 1);
            overflow: hidden;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .marker {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 30px solid #ef4444;
            z-index: 10;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ff0;
            animation: fall 3s linear forwards;
            pointer-events: none;
        }

        @keyframes fall {
            to { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        .genre-btn.active {
            background-color: #ef4444;
            color: white;
            transform: scale(1.05);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .result-item {
            animation: slideIn 0.5s ease-out forwards;
            opacity: 0;
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-md mx-auto bg-white rounded-3xl shadow-xl overflow-hidden border-4 border-orange-100">
        <!-- Header -->
        <div class="bg-orange-400 p-6 text-white text-center">
            <h1 class="text-2xl font-bold flex items-center justify-center gap-2">
                <span>ğŸ³</span> çŒ®ç«‹ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ
            </h1>
            <p class="text-sm opacity-90 mt-1">ä»Šæ—¥ã®ãƒ©ãƒƒã‚­ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¤‡æ•°ææ¡ˆï¼</p>
        </div>

        <div class="p-6 space-y-6">
            <!-- Ingredients Input -->
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-2">ä½¿ã„ãŸã„é£Ÿæï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰</label>
                <input type="text" id="ingredients" placeholder="ä¾‹: é¶è‚‰, ç‰ã­ã, ã‚­ãƒ£ãƒ™ãƒ„" 
                    class="w-full px-4 py-3 rounded-xl border-2 border-orange-100 focus:border-orange-400 focus:outline-none transition-colors"
                    value="é¶è‚‰, ç‰ã­ã">
            </div>

            <!-- Genre Selection -->
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-2">ã‚¸ãƒ£ãƒ³ãƒ«ã‚’é¸æŠ</label>
                <div class="grid grid-cols-3 gap-2" id="genre-container">
                    <button class="genre-btn py-2 px-1 rounded-lg border-2 border-orange-100 text-sm font-medium transition-all active" data-genre="å’Œé£Ÿ">å’Œé£Ÿ</button>
                    <button class="genre-btn py-2 px-1 rounded-lg border-2 border-orange-100 text-sm font-medium transition-all" data-genre="æ´‹é£Ÿ">æ´‹é£Ÿ</button>
                    <button class="genre-btn py-2 px-1 rounded-lg border-2 border-orange-100 text-sm font-medium transition-all" data-genre="ä¸­è¯">ä¸­è¯</button>
                    <button class="genre-btn py-2 px-1 rounded-lg border-2 border-orange-100 text-sm font-medium transition-all" data-genre="ã‚¨ã‚¹ãƒ‹ãƒƒã‚¯">ã‚¨ã‚¹ãƒ‹ãƒƒã‚¯</button>
                    <button class="genre-btn py-2 px-1 rounded-lg border-2 border-orange-100 text-sm font-medium transition-all" data-genre="éººé¡">éººé¡</button>
                    <button class="genre-btn py-2 px-1 rounded-lg border-2 border-orange-100 text-sm font-medium transition-all" data-genre="ãŠã¤ã¾ã¿">ãŠã¤ã¾ã¿</button>
                </div>
            </div>

            <!-- Roulette Wheel Visual -->
            <div class="py-2">
                <div class="roulette-container">
                    <div class="marker"></div>
                    <div id="wheel" class="wheel">
                        <div class="text-center">
                            <span id="center-icon" class="text-6xl transition-all duration-75">ğŸ¤”</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Spin Button -->
            <button id="spin-btn" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-4 rounded-2xl shadow-lg transform active:scale-95 transition-all text-xl">
                ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›ã™ï¼
            </button>

            <!-- Result Message Area -->
            <div id="result-container" class="hidden space-y-3">
                <p class="text-center text-xs text-yellow-600 font-bold uppercase tracking-widest">âœ¨ ãŠã™ã™ã‚ã®å€™è£œ âœ¨</p>
                <div id="result-list" class="space-y-3">
                    <!-- Results will be injected here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        const menuDatabase = {
            "å’Œé£Ÿ": [
                { name: "è¦ªå­ä¸¼", items: ["é¶è‚‰", "ç‰ã­ã", "åµ"] },
                { name: "è±šã®ç”Ÿå§œç„¼ã", items: ["è±šè‚‰", "ç‰ã­ã", "ã‚­ãƒ£ãƒ™ãƒ„"] },
                { name: "è‚‰ã˜ã‚ƒãŒ", items: ["ç‰›è‚‰", "è±šè‚‰", "ã˜ã‚ƒãŒã„ã‚‚", "ç‰ã­ã", "äººå‚"] },
                { name: "ãƒ–ãƒªå¤§æ ¹", items: ["é­š", "å¤§æ ¹"] },
                { name: "é®­ã®ãƒ ãƒ‹ã‚¨ãƒ«å’Œé¢¨", items: ["é­š", "ãã®ã“"] },
                { name: "é‡èœç‚’ã‚", items: ["ã‚­ãƒ£ãƒ™ãƒ„", "è±šè‚‰", "ã‚‚ã‚„ã—", "äººå‚"] },
                { name: "ç…§ã‚Šç„¼ããƒã‚­ãƒ³", items: ["é¶è‚‰"] },
                { name: "ç­‘å‰ç…®", items: ["é¶è‚‰", "äººå‚", "ã”ã¼ã†", "ã‚Œã‚“ã“ã‚“"] }
            ],
            "æ´‹é£Ÿ": [
                { name: "ã‚ªãƒ ãƒ©ã‚¤ã‚¹", items: ["åµ", "é¶è‚‰", "ç‰ã­ã"] },
                { name: "ãƒãƒ³ãƒãƒ¼ã‚°", items: ["ã²ãè‚‰", "ç‰ã­ã"] },
                { name: "ãƒãƒˆãƒ•", items: ["ã‚½ãƒ¼ã‚»ãƒ¼ã‚¸", "ã‚­ãƒ£ãƒ™ãƒ„", "ã˜ã‚ƒãŒã„ã‚‚", "ç‰ã­ã"] },
                { name: "ãƒã‚­ãƒ³ã‚°ãƒªãƒ«", items: ["é¶è‚‰", "ã˜ã‚ƒãŒã„ã‚‚"] },
                { name: "ã‚¯ãƒªãƒ¼ãƒ ã‚·ãƒãƒ¥ãƒ¼", items: ["é¶è‚‰", "ç‰ã­ã", "äººå‚", "ã˜ã‚ƒãŒã„ã‚‚"] },
                { name: "ã‚°ãƒ©ã‚¿ãƒ³", items: ["ãƒã‚«ãƒ­ãƒ‹", "é¶è‚‰", "ç‰ã­ã", "ãƒãƒ¼ã‚º"] },
                { name: "ãƒ­ãƒ¼ãƒ«ã‚­ãƒ£ãƒ™ãƒ„", items: ["ã‚­ãƒ£ãƒ™ãƒ„", "ã²ãè‚‰"] }
            ],
            "ä¸­è¯": [
                { name: "éº»å©†è±†è…", items: ["è±†è…", "ã²ãè‚‰"] },
                { name: "å›é‹è‚‰", items: ["è±šè‚‰", "ã‚­ãƒ£ãƒ™ãƒ„", "ãƒ”ãƒ¼ãƒãƒ³"] },
                { name: "é’æ¤’è‚‰çµ²", items: ["ç‰›è‚‰", "ãƒ”ãƒ¼ãƒãƒ³", "ãŸã‘ã®ã“"] },
                { name: "ã‚¨ãƒ“ãƒãƒª", items: ["ã‚¨ãƒ“", "ã­ã"] },
                { name: "å…«å®èœ", items: ["ç™½èœ", "è±šè‚‰", "ã‚¨ãƒ“", "ã†ãšã‚‰"] },
                { name: "é¤ƒå­", items: ["ã²ãè‚‰", "ã‚­ãƒ£ãƒ™ãƒ„", "ãƒ‹ãƒ©"] },
                { name: "ãƒãƒ£ãƒ¼ãƒãƒ³", items: ["åµ", "ã­ã", "ãƒãƒ ", "ã”é£¯"] }
            ],
            "ã‚¨ã‚¹ãƒ‹ãƒƒã‚¯": [
                { name: "ã‚¬ãƒ‘ã‚ªãƒ©ã‚¤ã‚¹", items: ["ã²ãè‚‰", "åµ", "ãƒ‘ãƒ—ãƒªã‚«", "ãƒã‚¸ãƒ«"] },
                { name: "ã‚°ãƒªãƒ¼ãƒ³ã‚«ãƒ¬ãƒ¼", items: ["é¶è‚‰", "ãªã™", "ãŸã‘ã®ã“"] },
                { name: "ã‚¿ã‚³ãƒ©ã‚¤ã‚¹", items: ["ã²ãè‚‰", "ãƒ¬ã‚¿ã‚¹", "ãƒˆãƒãƒˆ", "ãƒãƒ¼ã‚º"] },
                { name: "ãƒŠã‚·ã‚´ãƒ¬ãƒ³", items: ["ã‚¨ãƒ“", "é¶è‚‰", "åµ"] },
                { name: "ãƒ•ã‚©ãƒ¼", items: ["é¶è‚‰", "ã‚‚ã‚„ã—", "éºº"] }
            ],
            "éººé¡": [
                { name: "ã‚½ãƒ¼ã‚¹ç„¼ããã°", items: ["ã‚­ãƒ£ãƒ™ãƒ„", "è±šè‚‰", "éºº"] },
                { name: "ãƒŸãƒ¼ãƒˆã‚½ãƒ¼ã‚¹ãƒ‘ã‚¹ã‚¿", items: ["ã²ãè‚‰", "ç‰ã­ã", "ãƒ‘ã‚¹ã‚¿"] },
                { name: "ã†ã©ã‚“", items: ["ã†ã©ã‚“", "æ²¹æšã’", "åµ"] },
                { name: "å†·ã‚„ã—ä¸­è¯", items: ["ãã‚…ã†ã‚Š", "ãƒãƒ ", "åµ", "éºº"] },
                { name: "ã‚«ãƒ«ãƒœãƒŠãƒ¼ãƒ©", items: ["ãƒ‘ã‚¹ã‚¿", "åµ", "ãƒ™ãƒ¼ã‚³ãƒ³", "ãƒãƒ¼ã‚º"] }
            ],
            "ãŠã¤ã¾ã¿": [
                { name: "æè±†ãƒãƒ¼ã‚º", items: ["æè±†", "ãƒãƒ¼ã‚º"] },
                { name: "å†·å¥´ã‚¢ãƒ¬ãƒ³ã‚¸", items: ["è±†è…", "ã‚­ãƒ ãƒ", "ã­ã"] },
                { name: "ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒãƒ†ãƒˆ", items: ["ã˜ã‚ƒãŒã„ã‚‚", "ãƒ™ãƒ¼ã‚³ãƒ³"] },
                { name: "ã‚¢ã‚µãƒªã®é…’è’¸ã—", items: ["ã‚¢ã‚µãƒª"] },
                { name: "ã ã—å·»ãåµ", items: ["åµ"] }
            ]
        };

        const foodEmojis = ["ğŸ•", "ğŸ£", "ğŸ”", "ğŸœ", "ğŸ¥—", "ğŸ›", "ğŸ¢", "ğŸ²", "ğŸ", "ğŸ¥©", "ğŸ—", "ğŸ¥Ÿ", "ğŸ¤", "ğŸ±"];

        let currentGenre = "å’Œé£Ÿ";
        let isSpinning = false;

        // ã‚¸ãƒ£ãƒ³ãƒ«ãƒœã‚¿ãƒ³åˆ‡ã‚Šæ›¿ãˆ
        document.querySelectorAll('.genre-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                if (isSpinning) return;
                document.querySelectorAll('.genre-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentGenre = btn.dataset.genre;
            });
        });

        // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã®å®Ÿè¡Œ
        document.getElementById('spin-btn').addEventListener('click', () => {
            if (isSpinning) return;

            const inputVal = document.getElementById('ingredients').value;
            const inputIngredients = inputVal.split(/[,ã€\s]+/).filter(i => i !== "");
            
            if (inputIngredients.length === 0) {
                alert("é£Ÿæã‚’1ã¤ä»¥ä¸Šå…¥åŠ›ã—ã¦ãã ã•ã„ï¼");
                return;
            }

            startSpin(inputIngredients);
        });

        function startSpin(inputIngredients) {
            isSpinning = true;
            const wheel = document.getElementById('wheel');
            const container = document.getElementById('result-container');
            const centerIcon = document.getElementById('center-icon');
            
            container.classList.add('hidden');

            // çµµæ–‡å­—ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«å¤‰ãˆã‚‹ã‚¿ã‚¤ãƒãƒ¼
            const emojiInterval = setInterval(() => {
                const randomEmoji = foodEmojis[Math.floor(Math.random() * foodEmojis.length)];
                centerIcon.innerText = randomEmoji;
            }, 100);

            // å›è»¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            const randomDegree = 1800 + Math.floor(Math.random() * 360);
            wheel.style.transform = `rotate(${randomDegree}deg)`;

            setTimeout(() => {
                clearInterval(emojiInterval);
                const results = selectMultipleMenus(inputIngredients);
                displayResults(results);
                isSpinning = false;
                centerIcon.innerText = "âœ¨";
                createConfetti();
            }, 3000);
        }

        function selectMultipleMenus(userIngredients) {
            const genreList = menuDatabase[currentGenre];
            
            // å…¥åŠ›é£ŸæãŒå«ã¾ã‚Œã‚‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æ¢ã™
            let matches = genreList.filter(menu => {
                return menu.items.some(item => 
                    userIngredients.some(userInput => userInput.includes(item) || item.includes(userInput))
                );
            });

            // å€™è£œãŒå°‘ãªã„å ´åˆã¯ã€ã‚¸ãƒ£ãƒ³ãƒ«å…¨ä½“ã‹ã‚‰è£œå¡«
            let finalSelection = [...matches];
            if (finalSelection.length < 3) {
                const remaining = genreList.filter(m => !finalSelection.includes(m));
                const shuffled = remaining.sort(() => 0.5 - Math.random());
                finalSelection = finalSelection.concat(shuffled.slice(0, 3 - finalSelection.length));
            }

            return finalSelection.sort(() => 0.5 - Math.random()).slice(0, 3).map(menu => {
                const isMatch = matches.includes(menu);
                return {
                    name: menu.name,
                    desc: isMatch ? `ã€Œ${userIngredients.join('ã€')}ã€ã«ãƒ”ãƒƒã‚¿ãƒªï¼` : `${currentGenre}ã®å®šç•ªãƒ¡ãƒ‹ãƒ¥ãƒ¼ã§ã™ï¼`,
                    badge: isMatch ? "ãƒãƒƒãƒï¼" : "ãŠã™ã™ã‚"
                };
            });
        }

        function displayResults(results) {
            const container = document.getElementById('result-container');
            const list = document.getElementById('result-list');
            list.innerHTML = '';

            results.forEach((menu, index) => {
                const div = document.createElement('div');
                div.className = "result-item p-4 bg-yellow-50 border-2 border-yellow-200 rounded-2xl flex items-center justify-between";
                div.style.animationDelay = `${index * 0.2}s`;
                
                div.innerHTML = `
                    <div>
                        <span class="inline-block px-2 py-0.5 rounded text-[10px] font-bold mb-1 ${menu.badge === 'ãƒãƒƒãƒï¼' ? 'bg-red-100 text-red-600' : 'bg-blue-100 text-blue-600'}">
                            ${menu.badge}
                        </span>
                        <h3 class="text-lg font-bold text-gray-800">${menu.name}</h3>
                        <p class="text-xs text-gray-500">${menu.desc}</p>
                    </div>
                    <div class="text-2xl">ğŸ±</div>
                `;
                list.appendChild(div);
            });

            container.classList.remove('hidden');
        }

        function createConfetti() {
            for (let i = 0; i < 40; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.animationDuration = (Math.random() * 2 + 1) + 's';
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 3000);
            }
        }
    </script>
</body>
</html>